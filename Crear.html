<!doctype html>
<html lang="en">
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<link rel="stylesheet" href="Inicio.css"> 
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>

<body>

<div class="sidenav">
         <div class="login-main-text">
            <h2>Application<br> Login Page</h2>
            <p>Login or register from here to access.</p>
         </div>
      </div>
      <div class="main">
         <div class="col-md-6 col-sm-12">
            <div class="login-form">
               <form>
                  <div class="form-group">
                     <label>Nombre</label>
                     <input id= "nombre" type="text" class="form-control" placeholder="Nombre">
                  </div>
                  <div class="form-group">
                    <label>Apellido</label>
                    <input id= "apellido" type="text" class="form-control" placeholder="Apellido">
                 </div>
                 <div class="form-group">
                    <label>Usuario</label>
                    <input id= "usuario" type="text" class="form-control" placeholder="Usuario">
                 </div>
                  <div class="form-group">
                     <label>Password</label>
                     <input id ="password" type="password" class="form-control" placeholder="Password">
                  </div>
                  <div class="form-group">
                    <label>Confirmar password</label>
                    <input type="password" class="form-control" placeholder="Confirmar password">
                 </div>
                 <button onclick="Registrarse()" type="button" class="btn btn-black">Registrarse</button>
                 <button onclick="Regresar()" type="button" class="btn btn-secondary">Regresar</button>
               </form>
            </div>
         </div>
      </div>

      <script>
         function Registrarse(){
         var nombre = document.querySelector('#nombre').value
         var apellido = document.querySelector('#apellido').value
         var usuario = document.querySelector('#usuario').value
         var password = document.querySelector('#password').value
         var cliente = "cliente"
         var obejeto = {
             'nombre' : nombre, 
             'apellido' : apellido,
             'usuario' : usuario, 
             'password' : password,
             'tipo' : cliente
         }
         console.log(obejeto)
         fetch('https://proyecto201902185.herokuapp.com//Personas',{
            method: 'POST', 
            body: JSON.stringify(obejeto),
            headers: {
               'Content-Type' : 'application/json'
            }
         }).then(res => res.json())
         .catch(error =>{
            console.error('Error:', error)
            alert("Hay Error")
         })
         .then(response =>{
            console.log('Success:', response);
            console.log(response.message)
            if(response.message =="Failed"){
               alert(response.reason)
            }else{
               alert(response.reason)
               location.href = "Inicio.html"
            }
         })
         }
         function Regresar(){
            location.href = "Inicio.html"
         }
      </script>

</body>
</html>